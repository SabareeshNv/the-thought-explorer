---
import { Picture } from "@astrojs/image/components";
import FormattedDate from "./FormattedDate.astro";
import { slugify } from "@utils/helpers";

const { post } = Astro.props;
const { title, summary, pubDate, category, image } = post.data;
---

<article
    class="grid md:grid-cols-3 lg:gap-1 bg-white custom-shadow rounded-t md:rounded-l md:rounded-tr-none"
>
    <div class="md:col-span-2">
        <a href={`/blog/${post.slug}/`}>
            <Picture
                src={image.src}
                alt={image.alt}
                widths={[200, 400, 800, 1200]}
                sizes="(max-width: 800px) 100vw, 1200px"
                aspectRatio="2:1"
                class="h-full rounded-t md:rounded-l md:rounded-tr-none"
            />
        </a>
    </div>

    <div class="p-4 space-y-4">
        <div class="flex flex-wrap items-center justify-between">
            <a
                href={`/category/${slugify(category)}`}
                class="text-sm tracking-wider font-medium text-red-900 hover:text-red-700 uppercase"
                >{category}</a
            >

            <FormattedDate
                date={pubDate}
                class="text-sm font-light tracking-wider"
            />
        </div>
        <h2 class="text-xl font-medium font-heading leading-tight">
            <a href={`/blog/${post.slug}/`}>{title}</a>
        </h2>
        <div class="font-light">
            {summary}
        </div>
    </div>
</article>
